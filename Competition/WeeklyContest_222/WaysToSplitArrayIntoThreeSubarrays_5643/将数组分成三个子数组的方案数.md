# 5643-将数组分成三个子数组的方案数

## [题目](https://leetcode-cn.com/problems/ways-to-split-array-into-three-subarrays/)(难度中等)

我们称一个分割整数数组的方案是 好的 ，当它满足：

数组被分成三个 非空 连续子数组，从左至右分别命名为 left ， mid ， right 。
left 中元素和小于等于 mid 中元素和，mid 中元素和小于等于 right 中元素和。
给你一个 非负 整数数组 nums ，请你返回 好的 分割 nums 方案数目。由于答案可能会很大，请你将结果对 109 + 7 取余后返回。

~~~markdown
示例 1：

输入：nums = [1,1,1]
输出：1
解释：唯一一种好的分割方案是将 nums 分成 [1] [1] [1] 。
示例 2：

输入：nums = [1,2,2,2,5,0]
输出：3
解释：nums 总共有 3 种好的分割方案：
[1] [2] [2,2,5,0]
[1] [2,2] [2,5,0]
[1,2] [2,2] [5,0]
示例 3：

输入：nums = [3,2,1]
输出：0
解释：没有好的分割方案。
~~~

**提示:**
- 3 <= nums.length <= 105
- 0 <= nums[i] <= 104

### 算法知识点
1. 回溯 + 前缀和
回溯法,遍历所有可能的情况, 但会导致超时.
因此, 必须想办法降低时间复杂度.

2. 二分查找 + 前缀和

- 前缀和
首先通过前缀和数组的形式来存储每个前缀的前缀和. 方便计算某个区间内的元素和.

- 二分查找
我们要找出所有可能的分割情况.

    - 对于第一刀分割来说, 它可能有n-1中分割方式, 遍历这n-1个位置, 将位置i作为left和mid子数组的分界线, 然后二分查找mid和right的分界线范围.

    - 因为对于第二刀来说, 它可能会有很多中方式. 因此,我们要求出第二刀的一个最大范围 $[x,y]$, 而(y-x+1)就是当前情况下所有可能的第二刀的位置数. 而对于边界x和y,我们用两次二分查找来分别确定.

    - 二分查找x
    边界x需要满足的条件为:
    $preSum[x] - preSum[i] \ge preSum[i]$ ,此时才能满足 $left < mid$
    而我们要找的是满足此条件的最小x值.

    - 二分查找y
    边界y需要满足的条件为:
    $preSum[n-1] - preSum[y] \ge preSum[y] - preSum[i]$, 此时才能满足 $mid < right$
    而我们需要找的是满足此条件的最大y值.