# 309-最佳买卖股票时机含冷冻期

## [题目](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/)(难度中等)

给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​

设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

- 你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。
- 卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。

~~~markdown
示例:

输入: [1,2,3,0,2]
输出: 3 
解释: 对应的交易状态为: [买入, 卖出, 冷冻期, 买入, 卖出]
~~~

### 算法知识点
1. 动态规划 (股票系列: dp[i][k][state] i 是时间，k 是次数，state 是状态)
此题, 不限制股票的交易次数, 因此不需要k这个维度来表示是第几次交易.
此题比`122-股票买卖的最佳时机II`多了一个限制条件, 就是在卖出股票后, 无法在第二天买入股票(即冷冻期为1天). 针对这一限制,我们需要对状态的定义进行调整.

- 状态定义:
$f(n,0)$ 表示在第n天交易完成后, 下一天不会处于冷冻期,并且当前不持有股票的最大收益. (相当于说当前没有股票,且今天没有卖出股票).
$f(n,1)$ 表示在第n天交易完成后, 下一天将处于冷冻期,并且当期那不持有股票的最大收益. (相当于说当前面没有股票,且就是今天当卖出去的).
$f(n,2)$ 表示在第n天交易完成后, 持有股票的最大收益.

- 状态转移方程:
$$
f(n,0) = max(f(n-1,1), f(n-1),0)\\
f(n,1) = f(n-1,2) + prices[i]\\
f(n,2) = max(f(n-1,2), f(n,0) - prices[i])
$$

- 初始化
$f(0,0) = 0$
$f(0,1) = 0$ 这种情况其实是不存在的, 但初始化为0没有问题.
$f(0,2) = -prices[i]$
